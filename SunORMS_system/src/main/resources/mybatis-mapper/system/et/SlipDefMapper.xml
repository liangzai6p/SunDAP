<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sunyard.ars.system.dao.et.SlipDefMapper">
  <resultMap id="BaseResultMap" type="com.sunyard.ars.system.bean.et.SlipDef">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="SLIP_NO" jdbcType="VARCHAR" property="slipNo" />
    <result column="SLIP_TYPE" jdbcType="VARCHAR" property="slipType" />
    <result column="SLIP_NAME" jdbcType="VARCHAR" property="slipName" />
    <result column="SLIP_LEVEL" jdbcType="CHAR" property="slipLevel" />
    <result column="AMERCE_MONEY" jdbcType="DECIMAL" property="amerceMoney" />
    <result column="AMERCE_SCORE" jdbcType="DECIMAL" property="amerceScore" />
    <result column="CREATE_DATE" jdbcType="CHAR" property="createDate" />
    <result column="STOP_DATE" jdbcType="CHAR" property="stopDate" />
    <result column="ACTIVE_FLAG" jdbcType="CHAR" property="activeFlag" />
    <result column="BELONG_FLAG" jdbcType="CHAR" property="belongFlag" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="BUSINESS_ASSOCIATION" jdbcType="VARCHAR" property="businessAssociation" />
    <result column="OPERATION_TYPE" jdbcType="VARCHAR" property="operationType" />
    <result column="SLIPWORK_TYPE" jdbcType="VARCHAR" property="slipWorkType" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    SLIP_NO, OPERATION_TYPE,SLIP_TYPE, SLIP_NAME, SLIP_LEVEL, AMERCE_MONEY, AMERCE_SCORE, CREATE_DATE, 
    STOP_DATE, ACTIVE_FLAG, BELONG_FLAG, REMARK, BUSINESS_ASSOCIATION,SLIPWORK_TYPE
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from ET_SLIP_DEF
    where SLIP_NO = #{slipNo,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ET_SLIP_DEF
    where SLIP_NO = #{slipNo,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.sunyard.ars.system.bean.et.SlipDef">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ET_SLIP_DEF (SLIP_NO,OPERATION_TYPE, SLIP_TYPE, SLIP_NAME, 
      SLIP_LEVEL, AMERCE_MONEY, AMERCE_SCORE, 
      CREATE_DATE, STOP_DATE, ACTIVE_FLAG, 
      BELONG_FLAG, REMARK, BUSINESS_ASSOCIATION, SLIPWORK_TYPE
      )
    values (#{slipNo,jdbcType=VARCHAR},#{operationType,jdbcType=VARCHAR}, #{slipType,jdbcType=VARCHAR}, #{slipName,jdbcType=VARCHAR}, 
      #{slipLevel,jdbcType=CHAR}, #{amerceMoney,jdbcType=DECIMAL}, #{amerceScore,jdbcType=DECIMAL}, 
      #{createDate,jdbcType=CHAR}, #{stopDate,jdbcType=CHAR}, #{activeFlag,jdbcType=CHAR}, 
      #{belongFlag,jdbcType=CHAR}, #{remark,jdbcType=VARCHAR}, #{businessAssociation,jdbcType=VARCHAR}, 
      #{slipWorkType,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.sunyard.ars.system.bean.et.SlipDef">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ET_SLIP_DEF
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="slipNo != null">
        SLIP_NO,
      </if>
      <if test="operationType != null">
        OPERATION_TYPE,
      </if>
      <if test="slipType != null">
        SLIP_TYPE,
      </if>
      <if test="slipName != null">
        SLIP_NAME,
      </if>
      <if test="slipLevel != null">
        SLIP_LEVEL,
      </if>
      <if test="amerceMoney != null">
        AMERCE_MONEY,
      </if>
      <if test="amerceScore != null">
        AMERCE_SCORE,
      </if>
      <if test="createDate != null">
        CREATE_DATE,
      </if>
      <if test="stopDate != null">
        STOP_DATE,
      </if>
      <if test="activeFlag != null">
        ACTIVE_FLAG,
      </if>
      <if test="belongFlag != null">
        BELONG_FLAG,
      </if>
      <if test="remark != null">
        REMARK,
      </if>
      <if test="businessAssociation != null">
        BUSINESS_ASSOCIATION,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="slipNo != null">
        #{slipNo,jdbcType=VARCHAR},
      </if>
      <if test="operationType != null">
        #{operationType,jdbcType=VARCHAR},
      </if>
      <if test="slipType != null">
        #{slipType,jdbcType=VARCHAR},
      </if>
      <if test="slipName != null">
        #{slipName,jdbcType=VARCHAR},
      </if>
      <if test="slipLevel != null">
        #{slipLevel,jdbcType=CHAR},
      </if>
      <if test="amerceMoney != null">
        #{amerceMoney,jdbcType=DECIMAL},
      </if>
      <if test="amerceScore != null">
        #{amerceScore,jdbcType=DECIMAL},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=CHAR},
      </if>
      <if test="stopDate != null">
        #{stopDate,jdbcType=CHAR},
      </if>
      <if test="activeFlag != null">
        #{activeFlag,jdbcType=CHAR},
      </if>
      <if test="belongFlag != null">
        #{belongFlag,jdbcType=CHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="businessAssociation != null">
        #{businessAssociation,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.sunyard.ars.system.bean.et.SlipDef">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ET_SLIP_DEF
    <set>
      <if test="slipType != null">
        SLIP_TYPE = #{slipType,jdbcType=VARCHAR},
      </if>
      <if test="operationType != null">
        OPERATION_TYPE =#{operationType,jdbcType=VARCHAR},
      </if>
      <if test="slipName != null">
        SLIP_NAME = #{slipName,jdbcType=VARCHAR},
      </if>
      <if test="slipLevel != null">
        SLIP_LEVEL = #{slipLevel,jdbcType=CHAR},
      </if>
      <if test="amerceMoney != null">
        AMERCE_MONEY = #{amerceMoney,jdbcType=DECIMAL},
      </if>
      <if test="amerceScore != null">
        AMERCE_SCORE = #{amerceScore,jdbcType=DECIMAL},
      </if>
      <if test="createDate != null">
        CREATE_DATE = #{createDate,jdbcType=CHAR},
      </if>
      <if test="stopDate != null">
        STOP_DATE = #{stopDate,jdbcType=CHAR},
      </if>
      <if test="activeFlag != null">
        ACTIVE_FLAG = #{activeFlag,jdbcType=CHAR},
      </if>
      <if test="belongFlag != null">
        BELONG_FLAG = #{belongFlag,jdbcType=CHAR},
      </if>
      <if test="remark != null">
        REMARK = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="businessAssociation != null">
        BUSINESS_ASSOCIATION = #{businessAssociation,jdbcType=VARCHAR},
      </if>
    </set>
    where SLIP_NO = #{slipNo,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.sunyard.ars.system.bean.et.SlipDef">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ET_SLIP_DEF
    set SLIP_TYPE = #{slipType,jdbcType=VARCHAR},
      SLIP_NAME = #{slipName,jdbcType=VARCHAR},
      SLIP_LEVEL = #{slipLevel,jdbcType=CHAR},
      AMERCE_MONEY = #{amerceMoney,jdbcType=DECIMAL},
      AMERCE_SCORE = #{amerceScore,jdbcType=DECIMAL},
      CREATE_DATE = #{createDate,jdbcType=CHAR},
      STOP_DATE = #{stopDate,jdbcType=CHAR},
      ACTIVE_FLAG = #{activeFlag,jdbcType=CHAR},
      BELONG_FLAG = #{belongFlag,jdbcType=CHAR},
      REMARK = #{remark,jdbcType=VARCHAR},
      BUSINESS_ASSOCIATION = #{businessAssociation,jdbcType=VARCHAR}
    where SLIP_NO = #{slipNo,jdbcType=VARCHAR}
  </update>
  
  <select id="selectBySelective" parameterType="com.sunyard.ars.system.bean.et.SlipDef" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List"/> from ET_SLIP_DEF
  	<where> 1=1
      <if test="slipNo != null and slipNo != ''">
        AND SLIP_NO = #{slipNo,jdbcType=VARCHAR}
      </if>
      <if test="slipType != null and slipType != ''">
        AND SLIP_TYPE like '%'||#{slipType,jdbcType=VARCHAR}||'%'
      </if>
      <if test="slipName != null and slipName != ''">
        AND SLIP_NAME like '%'||#{slipName,jdbcType=VARCHAR}||'%'
      </if>
      <if test="slipLevel != null and slipLevel != ''">
        AND SLIP_LEVEL = #{slipLevel,jdbcType=CHAR}
      </if>
      <if test="amerceMoney != null and amerceMoney != ''">
        AND AMERCE_MONEY = #{amerceMoney,jdbcType=DECIMAL}
      </if>
      <if test="amerceScore != null and amerceScore != ''">
        AND AMERCE_SCORE = #{amerceScore,jdbcType=DECIMAL}
      </if>
      <if test="createDate != null and createDate != ''">
        AND CREATE_DATE = #{createDate,jdbcType=CHAR}
      </if>
      <if test="stopDate != null and stopDate != ''">
        AND STOP_DATE = #{stopDate,jdbcType=CHAR}
      </if>
      <if test="activeFlag != null and activeFlag != ''">
        AND ACTIVE_FLAG = #{activeFlag,jdbcType=CHAR}
      </if>
      <if test="belongFlag != null and belongFlag != ''">
        AND BELONG_FLAG = #{belongFlag,jdbcType=CHAR}
      </if>
      <if test="remark != null and remark != ''">
        AND REMARK = #{remark,jdbcType=VARCHAR}
      </if>
      <if test="businessAssociation != null and businessAssociation != ''">
        AND BUSINESS_ASSOCIATION = #{businessAssociation,jdbcType=VARCHAR}
      </if>  
      <if test="slipWorkType != null and slipWorkType != ''">
        AND SLIPWORK_TYPE = #{slipWorkType,jdbcType=VARCHAR}
      </if>  
      order by SLIPWORK_TYPE, SLIP_TYPE, SLIP_LEVEL	
  	</where>
  </select>
  
  <select id="getTypeByBelong" resultType="java.lang.String">

    <!-- db2  select distinct order by decode 会报错 ，先排序再 distinct -->
    select distinct SLIP_TYPE
    from (
    select  SLIP_TYPE from ET_SLIP_DEF
    where ACTIVE_FLAG ='1'
    <if test="belongList!=null and belongList.size!=0">
      AND BELONG_FLAG in
      <foreach collection="belongList" item="belong" index="index" open="(" close=")" separator="," >
        #{belong}
      </foreach>
    </if>
    AND SLIPWORK_TYPE = '0'
    ORDER BY DECODE(SLIP_TYPE, '严重差错', 0, '较严重差错', 10, '规范性差错', 20, '案件高发类', 30, 99)
    )
  </select>
  
  
  <select id="getTypeByBelongByQd" resultType="java.lang.String">
    <!-- db2  select distinct order by decode 会报错 ，先排序再 distinct -->
    select distinct SLIP_TYPE from (
      select  SLIP_TYPE from ET_SLIP_DEF
      where ACTIVE_FLAG ='1'
      AND  (BUSINESS_ASSOCIATION IS NULL OR BUSINESS_ASSOCIATION IN (SELECT SST.PARAM_VALUE FROM SM_SYSPARAMETER_TB SST WHERE SST.PARAM_ITEM = 'PARENT_ORGAN_NO') OR BUSINESS_ASSOCIATION = #{loginOrganNo,jdbcType=VARCHAR})
      <if test="belongList!=null and belongList.size!=0">
        AND BELONG_FLAG in
        <foreach collection="belongList" item="belong" index="index" open="(" close=")" separator="," >
          #{belong}
        </foreach>
      </if>
      AND SLIPWORK_TYPE = '1'

      ORDER BY DECODE(SLIP_TYPE, '差错类', 10, '违规类', 20, '案件类', 30, 99)
    )

  </select>
  
  
  <select id="selectByOrgan" parameterType="java.util.HashMap" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List"/> from ET_SLIP_DEF
  	<where> 1=1
  	
  	<if test="organNo != null and organNo != ''" >
    AND BUSINESS_ASSOCIATION in(select parent_organ from sm_organ_parent_tb where organ_no = #{organNo})
    </if>
  	
      <if test="slipDef.slipNo != null and slipDef.slipNo != ''">
        AND SLIP_NO = #{slipDef.slipNo,jdbcType=VARCHAR}
      </if>
      <if test="slipDef.slipType != null and slipDef.slipType != ''">
        AND SLIP_TYPE like '%'||#{slipDef.slipType,jdbcType=VARCHAR}||'%'
      </if>
      <if test="slipDef.slipName != null and slipDef.slipName != ''">
        AND SLIP_NAME like '%'||#{slipDef.slipName,jdbcType=VARCHAR}||'%'
      </if>
      <if test="slipDef.slipLevel != null and slipDef.slipLevel != ''">
        AND SLIP_LEVEL = #{slipDef.slipLevel,jdbcType=CHAR}
      </if>
      <if test="slipDef.amerceMoney != null and slipDef.amerceMoney != ''">
        AND AMERCE_MONEY = #{slipDef.amerceMoney,jdbcType=DECIMAL}
      </if>
      <if test="slipDef.amerceScore != null and slipDef.amerceScore != ''">
        AND AMERCE_SCORE = #{slipDef.amerceScore,jdbcType=DECIMAL}
      </if>
      <if test="slipDef.createDate != null and slipDef.createDate != ''">
        AND CREATE_DATE = #{slipDef.createDate,jdbcType=CHAR}
      </if>
      <if test="slipDef.stopDate != null and slipDef.stopDate != ''">
        AND STOP_DATE = #{slipDef.stopDate,jdbcType=CHAR}
      </if>
      <if test="slipDef.activeFlag != null and slipDef.activeFlag != ''">
        AND ACTIVE_FLAG = #{slipDef.activeFlag,jdbcType=CHAR}
      </if>
      <if test="slipDef.belongFlag != null and slipDef.belongFlag != ''">
        AND BELONG_FLAG = #{slipDef.belongFlag,jdbcType=CHAR}
      </if>
      <if test="slipDef.remark != null and slipDef.remark != ''">
        AND REMARK = #{slipDef.remark,jdbcType=VARCHAR}
      </if>
     
      <if test="slipDef.slipWorkType != null and slipDef.slipWorkType != ''">
        AND SLIPWORK_TYPE = #{slipDef.slipWorkType,jdbcType=VARCHAR}
      </if>  
      order by SLIPWORK_TYPE, SLIP_TYPE, SLIP_LEVEL	
  	</where>
  </select>
  
  
</mapper>